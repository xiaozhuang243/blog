(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3546e95d"],{"45b2":function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("el-form",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],ref:"form",attrs:{model:e.form,"label-width":"80px",rules:e.rules}},[l("el-form-item",{attrs:{label:"分类",prop:"type"}},[l("el-select",{attrs:{placeholder:"请选择分类"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[l("el-option",{attrs:{label:"原创",value:"原创"}}),l("el-option",{attrs:{label:"转载",value:"转载"}})],1)],1),l("el-form-item",{attrs:{label:"标题",prop:"title"}},[l("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),l("el-form-item",{attrs:{label:"标签",prop:"tag"}},[l("el-select",{attrs:{placeholder:"请选择标签"},model:{value:e.form.tag,callback:function(t){e.$set(e.form,"tag",t)},expression:"form.tag"}},[l("el-option",{attrs:{label:"HTML&Css",value:"HTML&Css"}}),l("el-option",{attrs:{label:"JavaScript",value:"JavaScript"}}),l("el-option",{attrs:{label:"Node",value:"Node"}}),l("el-option",{attrs:{label:"Vue&React",value:"Vue&React"}}),l("el-option",{attrs:{label:"other",value:"o\n        ther"}})],1)],1),l("el-form-item",{attrs:{label:"内容",prop:"content"}},[l("RichText",{ref:"richText"})],1),l("el-form-item",{attrs:{label:"封面"}},[l("Upload",{on:{uploadSuccess:e.uploadSuccess}})],1),l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("form")}}},[e._v("发表文章")])],1)],1)],1)},o=[],n=l("d443"),r=l("d2a0"),i=l("365c");console.log(i["n"]);var s={name:"ArticleAdd",components:{Upload:n["a"],RichText:r["a"]},data:function(){var e=this;return{form:{type:"",title:"",tag:"",surface:"",content:"1"},fullscreenLoading:!1,rules:{type:[{required:!0,message:"请选择type"}],title:[{required:!0,message:"请输入title"}],tag:[{required:!0,message:"请输入tag"}],content:{validator:function(t,l,a){(function(){this.layedit.getContent(this.index)?a():a(new Error("请输入文章内容！"))}).call(e.$refs.richText)},required:!0}}}},methods:{uploadSuccess:function(e){this.form.surface=e},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!!"),!1;t.fullscreenLoading=!0,Object(i["n"])({type:t.form.type,title:t.form.title,tag:t.form.tag,surface:t.form.surface,content:function(){return this.layedit.getContent(this.index)}.call(t.$refs.richText)}).then((function(e){console.log(e),t.$message({message:"上传成功",type:"success",duration:2e3}),setTimeout((function(){t.fullscreenLoading=!1,window.location.reload()}),1e3)})).catch((function(){t.$message({message:"上传失败",type:"error",duration:2e3})}))}))}},beforeRouteLeave:function(e,t,l){this.$confirm("此操作将不会保存已编写的文章内容, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){l()})).catch((function(){}))}},u=s,c=l("2877"),f=Object(c["a"])(u,a,o,!1,null,"5f8311da",null);t["default"]=f.exports},d2a0:function(e,t,l){"use strict";var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("textarea",{ref:"demo",staticStyle:{display:"none"},attrs:{id:"demo"},domProps:{value:e.value}})])},o=[],n={name:"RichText",data:function(){return{layedit:null,index:0}},props:["value"],watch:{value:function(){var e=this;this.$refs.demo.value=this.value,layui.use("layedit",(function(){e.layedit=layui.layedit,e.index=e.layedit.build("demo")}))}},mounted:function(){var e=this;layui.use("layedit",(function(){e.layedit=layui.layedit,e.index=e.layedit.build("demo")}))}},r=n,i=l("2877"),s=Object(i["a"])(r,a,o,!1,null,"31627f37",null);t["a"]=s.exports}}]);
//# sourceMappingURL=chunk-3546e95d.68c0c429.js.map